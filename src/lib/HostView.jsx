import * as React from 'react';
import './HostView.scss';
import Search from './Search';

/**
 * A component for listing hosts by name
 */
export const HostView = React.memo(({ items }) => {
	const [view, setView] = React.useState('table');
	const switchView = type => setView(type);
	const [filteredQuery, setFilterQuery] = React.useState('');
	const searchResult = data => setFilterQuery(data, filteredQuery);

	const actionBar = () => {
		return (
			<>
				<div className='action-bar'>
					<button className={view === 'table' ? 'active' : ''} onClick={() => switchView('table')}>table view</button>
					<button className={view === 'list' ? 'active' : ''} onClick={() => switchView('list')}>list view</button>
					<Search items={items} result={searchResult} />
					<div className='count'>{items.length.toLocaleString("en-US")}</div>
				</div>
				<h2>Effected Hosts</h2></>
		);
	};

	const Table = () => {
		return (
			<table className='host-table-view'>
				<thead>
					<tr>
						<th>Index</th>
						<th>Host Identification</th>
					</tr>
				</thead>
				<tbody>
					{items.map((item, index) => (
						<tr key={index.toString().concat('-host-table')}>
							<td className='host-cell-index' >
								<p>{index}</p>
							</td>
							<td className='host-cell-item'>
								<p>{item}</p>
							</td>
						</tr>
					))
					}
				</tbody>
			</table>
		);
	};

	const List = () => {
		return (
			<ul className='host-list-view'>
				{items.map(item => (
					<li className='host' key={item.concat('-host-list')}>
						<p>{item}</p>
					</li>
				))
				}
			</ul>
		);
	};

	return (
		<>
			{actionBar()}
			{filteredQuery &&
				<div className='search-results'>
					<h4>Search results...</h4>
					<p><strong>Host Identification:</strong> {filteredQuery}</p>
				</div>
			}
			{view === 'table' ? <Table /> : <List />}
		</>
	)
});

export default HostView;
