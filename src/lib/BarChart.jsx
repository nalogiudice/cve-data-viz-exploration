import * as React from 'react';

/**
 * A very simple SVG barchart
 */
const Chart = ({ children, height, width }) => (
	<svg viewBox={`0 0 ${width} ${height}`} height={height} width={width}>
		{children}
	</svg>
);

const Bar = ({ fill, x, y, height, width }) => (
	<rect fill={fill} x={x} y={y} height={height} width={width} />
);

// for getting height
const greatestValue = (values) => values.reduce((acc, cur) => (cur > acc ? cur : acc));
	
export const BarChart = ({ data }) => {
	const barWidth = 80
	const barMargin = 10
	const width = data.length * (barWidth + barMargin)
	const height = greatestValue(data.map(props => props.total))

	return (
		<Chart height={height} width={width}>
			{data.map((props, index) => (
				<Bar
					key={props.level}
					fill={props.color}
					x={index * (barWidth + barMargin)}
					y={height - props.total}
					width={barWidth}
					height={props.total}
				/>
			))}
		</Chart>
	)
};

export default BarChart;
